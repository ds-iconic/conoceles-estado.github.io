"use strict";(self.webpackChunkcandidatos=self.webpackChunkcandidatos||[]).push([[113],{5113:(X,p,d)=>{d.r(p),d.d(p,{CandidatoModule:()=>V});var l=d(6814),_=d(5476),a=d(95),c=d(760),e=d(4769),h=d(6223),C=d(8245),b=d(8672),x=d(6207),g=d(6472);const Z=["closebutton"];function A(t,i){1&t&&(e.TgZ(0,"div",44),e._UZ(1,"div",45),e.qZA())}function U(t,i){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.nombre)}}function T(t,i){1&t&&(e.ynx(0),e._UZ(1,"span",66),e._uU(2,"Activo "),e.BQk())}function F(t,i){1&t&&(e._UZ(0,"span",67),e._uU(1," Inactivo "))}function q(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"tr"),e.YNc(1,U,2,1,"td",58),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e.YNc(5,T,3,0,"ng-container",59),e.YNc(6,F,2,0,"ng-template",null,60,e.W1O),e.qZA(),e.TgZ(8,"td")(9,"div",61)(10,"button",62),e.NdJ("click",function(){const s=e.CHM(o).$implicit,u=e.oxw(2);return e.KtG(u.setDataModalUpdate(s))}),e._UZ(11,"i",63),e.qZA(),e.TgZ(12,"button",64),e.NdJ("click",function(){const s=e.CHM(o).$implicit,u=e.oxw(2);return e.KtG(u.borrarUsuario(s.idUsuario,s.nombre))}),e._UZ(13,"i",65),e.qZA()()()()}if(2&t){const o=i.$implicit,n=e.MAs(7);e.xp6(1),e.Q6J("ngIf","candidato"!==o.rol),e.xp6(2),e.Oqu(o.email),e.xp6(2),e.Q6J("ngIf",o.estatus)("ngIfElse",n)}}function M(t,i){if(1&t&&(e.TgZ(0,"option",68),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}const J=function(t,i){return{itemsPerPage:t,currentPage:i}};function P(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"div",46)(2,"table",47)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Nombre(s)"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Apellido(s)"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Correo"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Estatus"),e.qZA(),e.TgZ(13,"th",48),e._uU(14,"Acciones"),e.qZA()()(),e.TgZ(15,"tbody",49),e.YNc(16,q,14,4,"tr",50),e.ALo(17,"paginate"),e.qZA()()(),e.TgZ(18,"div",51)(19,"div",52)(20,"label",53),e._uU(21,"Elementos por p\xe1gina:"),e.qZA(),e.TgZ(22,"select",54),e.NdJ("ngModelChange",function(r){e.CHM(o);const s=e.oxw();return e.KtG(s.itemsPerPage=r)}),e.YNc(23,M,2,2,"option",55),e.qZA()(),e.TgZ(24,"div",56)(25,"pagination-controls",57),e.NdJ("pageChange",function(r){e.CHM(o);const s=e.oxw();return e.KtG(s.currentPage=r)}),e.qZA()()()()}if(2&t){const o=e.oxw();e.xp6(16),e.Q6J("ngForOf",e.xi3(17,3,o.filtrarResultados(),e.WLB(6,J,o.itemsPerPage,o.currentPage))),e.xp6(6),e.Q6J("ngModel",o.itemsPerPage),e.xp6(1),e.Q6J("ngForOf",o.itemsPerPageOptions)}}function I(t,i){1&t&&e._UZ(0,"app-no-results")}function w(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," El nombre es obligatorio "),e.qZA())}function y(t,i){if(1&t&&(e.TgZ(0,"div",69),e.YNc(1,w,2,0,"div",58),e.qZA()),2&t){const o=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=o.userForm.get("nombre"))?null:n.hasError("required"))}}function N(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Los apellidos son requeridos "),e.qZA())}function E(t,i){if(1&t&&(e.TgZ(0,"div",69),e.YNc(1,N,2,0,"div",58),e.qZA()),2&t){const o=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=o.userForm.get("apellidos"))?null:n.hasError("required"))}}function S(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," El correo electr\xf3nico es requerido "),e.qZA())}function Q(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingresa una direcci\xf3n de correo electr\xf3nico v\xe1lida "),e.qZA())}function O(t,i){if(1&t&&(e.TgZ(0,"div",69),e.YNc(1,S,2,0,"div",58),e.YNc(2,Q,2,0,"div",58),e.qZA()),2&t){const o=e.oxw();let n,r;e.xp6(1),e.Q6J("ngIf",null==(n=o.userForm.get("email"))?null:n.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=o.userForm.get("email"))?null:r.hasError("email"))}}function j(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a es requerida "),e.qZA())}function Y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos 8 caracteres "),e.qZA())}function L(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe contener al menos una letra may\xfascula y un n\xfamero "),e.qZA())}function k(t,i){if(1&t&&(e.TgZ(0,"div",69),e.YNc(1,j,2,0,"div",58),e.YNc(2,Y,2,0,"div",58),e.YNc(3,L,2,0,"div",58),e.qZA()),2&t){const o=e.oxw(2);let n,r,s;e.xp6(1),e.Q6J("ngIf",null==(n=o.userForm.get("password"))?null:n.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=o.userForm.get("password"))?null:r.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(s=o.userForm.get("password"))?null:s.hasError("pattern"))}}function R(t,i){if(1&t&&(e.TgZ(0,"div",29)(1,"label",30),e._uU(2,"Contrase\xf1a"),e.qZA(),e._UZ(3,"input",70),e.YNc(4,k,4,3,"div",32),e.qZA()),2&t){const o=e.oxw();let n;e.xp6(4),e.Q6J("ngIf",null==(n=o.userForm.get("password"))?null:n.touched)}}const z=function(t,i){return{"text-success":t,"text-danger":i}},$=[{path:"",component:(()=>{class t{pageChanged(o){this.currentPage=o}constructor(o,n,r,s){this.usuarioService=o,this.mensajeService=n,this.spinnerService=r,this.formBuilder=s,this.usuarios=[],this.isLoadingUsers=c.v.neutro,this.usuariosFilter=[],this.filtro="",this.roles=[{rolId:2,nombre:"Candidato"}],this.isModalAdd=!1,this.itemsPerPage=10,this.currentPage=1,this.itemsPerPageOptions=[5,10,15],this.showPasswordInput=!1,this.crearFormularioUsuario()}ngOnInit(){this.usuarioService.refreshLisUsers.subscribe(()=>this.getListadoUsuarios()),this.getListadoUsuarios(),this.getRoles()}crearFormularioUsuario(){this.userForm=this.formBuilder.group({usuarioId:[null],rolId:[2],email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.minLength(8),a.kI.pattern(/[A-Z]/),a.kI.pattern(/[0-9]/)]],nombre:["",a.kI.required],apellidos:["",a.kI.required],estatus:[!0],requiereContrasena:[!1]})}getListadoUsuarios(){this.isLoadingUsers=c.v.trueLoading,this.usuarioService.getUsuarios().subscribe({next:o=>{this.usuarios=o.filter(n=>{const s=["candidato"].includes(n.rol.toLowerCase());return s||console.warn(`Usuario con rol no v\xe1lido: ${n.rol}`),s}),console.log("Usuarios despu\xe9s del filtrado:",this.usuarios),this.isLoadingUsers=c.v.falseLoading},error:o=>{this.isLoadingUsers=c.v.errorLoading,console.error("Error al obtener usuarios:",o)}})}getRoles(){this.usuarioService.getRoles().subscribe({next:o=>{const n=o.find(r=>"Candidato"===r.nombre);n&&this.roles.push(n)},error:o=>{console.log("Error al obtener los roles",o)}})}resetForm(){this.closebutton.nativeElement.click(),this.userForm.reset()}agregarUsuario(){this.usuario.idRol=2,this.usuarioService.postUsuario(this.usuario).subscribe({next:()=>{this.mensajeService.mensajeExito("Candidato agregado con \xe9xito"),this.resetForm()},error:o=>{this.mensajeService.mensajeError("Error al agregar candidato"),console.error(o)}})}actualizarUsuario(){this.usuarioService.putUsuario(this.usuario).subscribe({next:()=>{this.mensajeService.mensajeExito("Candidato actualizado con \xe9xito"),this.resetForm()},error:o=>{this.mensajeService.mensajeError("Error al actualizar candidato"),console.error(o)}})}submitUsuario(){this.usuario=this.userForm.value,this.isModalAdd?this.agregarUsuario():this.actualizarUsuario()}borrarUsuario(o,n){this.mensajeService.mensajeAdvertencia(`\xbfEst\xe1s seguro de eliminar el candidato: ${n}?`,()=>{this.usuarioService.deleteUsuario(o).subscribe({next:()=>{this.mensajeService.mensajeExito("Candidato borrado correctamente")},error:r=>this.mensajeService.mensajeError(r)})})}handleChangeAdd(){this.userForm.reset(),this.isModalAdd=!0}setDataModalUpdate(o){this.isModalAdd=!1,this.userForm.patchValue({usuarioId:o.idUsuario,rolId:o.idRol,email:o.email,password:o.passwordUsuario,estatus:o.estatus,nombre:o.nombre}),console.log(this.userForm.value)}filtrarResultados(){return this.usuarios.filter(o=>o.nombre.toLowerCase().includes(this.filtro.toLowerCase()))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.i),e.Y36(C.V),e.Y36(b.t2),e.Y36(a.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-candidato"]],viewQuery:function(o,n){if(1&o&&e.Gf(Z,5),2&o){let r;e.iGM(r=e.CRH())&&(n.closebutton=r.first)}},decls:69,vars:18,consts:[[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","border-bottom","py-3"],[1,"d-flex"],["data-bs-toggle","modal","data-bs-target","#modal-report",1,"btn","btn-primary",3,"click"],[1,"ti","ti-plus","me-1"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Buscar",1,"form-control","form-control-rounded",3,"ngModel","ngModelChange"],["busquedaInput",""],[1,"input-icon-addon"],[1,"ti","ti-search"],[3,"ngSwitch"],["class","progress",4,"ngSwitchCase"],[4,"ngSwitchCase"],["id","modal-report","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","modal-blur","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["closebutton",""],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row"],[1,"col-lg-6"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","nombre",1,"form-control"],["class","error-message",4,"ngIf"],["type","text","formControlName","apellidos",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["for","estadoActivo",1,"form-label"],[1,"form-check","form-switch","checkbox-verde"],["type","checkbox","formControlName","estatus",1,"form-check-input"],[1,"form-check-label",3,"ngClass"],["type","checkbox","formControlName","requiereContrasena",1,"form-check-input"],[1,"form-label-custom"],["class","mb-3",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"progress"],[1,"progress-bar","progress-bar-indeterminate","bg-green"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","text-nowrap","datatable"],[1,"text-center",2,"width","7%"],[1,"table-tbody"],[4,"ngFor","ngForOf"],[1,"pagination-and-items-per-page",2,"margin-bottom","0px"],[1,"items-per-page"],["for","itemsPerPage"],["id","itemsPerPage",2,"margin-left","5px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-container"],[3,"pageChange"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["elseEST",""],[1,"d-flex","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#modal-report",1,"btn","btn-warning","btn-icon","btn-sm",3,"click"],[1,"ti","ti-edit"],[1,"btn","btn-danger","btn-icon","btn-sm",3,"click"],[1,"ti","ti-eraser"],[1,"badge","bg-success","me-1"],[1,"badge","bg-danger","me-1"],[3,"value"],[1,"error-message"],["type","password","formControlName","password",1,"form-control"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Candidatos"),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.handleChangeAdd()}),e._UZ(9,"i",8),e._uU(10,"Agregar candidato "),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"input",11,12),e.NdJ("ngModelChange",function(s){return n.filtro=s}),e.qZA(),e.TgZ(15,"span",13),e._UZ(16,"i",14),e.qZA()()()()(),e.ynx(17,15),e.YNc(18,A,2,0,"div",16),e.YNc(19,P,26,9,"div",17),e.YNc(20,I,1,0,"app-no-results",17),e.BQk(),e.qZA()(),e.TgZ(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"h5",22),e._uU(26),e.qZA(),e._UZ(27,"button",23,24),e.qZA(),e.TgZ(29,"form",25),e.NdJ("ngSubmit",function(){return n.submitUsuario()}),e.TgZ(30,"div",26)(31,"div",27)(32,"div",28)(33,"div",29)(34,"label",30),e._uU(35,"Nombre"),e.qZA(),e._UZ(36,"input",31),e.YNc(37,y,2,1,"div",32),e.qZA()(),e.TgZ(38,"div",28)(39,"div",29)(40,"label",30),e._uU(41,"Apellidos"),e.qZA(),e._UZ(42,"input",33),e.YNc(43,E,2,1,"div",32),e.qZA()()(),e.TgZ(44,"div",27)(45,"div",28)(46,"div",29)(47,"label",30),e._uU(48,"Correo Electr\xf3nico"),e.qZA(),e._UZ(49,"input",34),e.YNc(50,O,3,2,"div",32),e.qZA()(),e.TgZ(51,"div",28)(52,"div",29)(53,"label",35),e._uU(54,"Estatus"),e.qZA(),e.TgZ(55,"label",36),e._UZ(56,"input",37),e.TgZ(57,"span",38),e._uU(58),e.qZA()()()()(),e.TgZ(59,"div",27)(60,"div",28)(61,"div",29),e._UZ(62,"input",39),e.TgZ(63,"label",40),e._uU(64,"Requiere contrase\xf1a"),e.qZA()(),e.YNc(65,R,5,1,"div",41),e.qZA()()(),e.TgZ(66,"div",42)(67,"button",43),e._uU(68),e.qZA()()()()()()()),2&o){let r,s,u,m,v,f;e.xp6(13),e.Q6J("ngModel",n.filtro),e.xp6(4),e.Q6J("ngSwitch",n.isLoadingUsers),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(6),e.hij(" ",n.isModalAdd?"Agregar":"Actualizar"," candidato "),e.xp6(3),e.Q6J("formGroup",n.userForm),e.xp6(8),e.Q6J("ngIf",null==(r=n.userForm.get("nombre"))?null:r.touched),e.xp6(6),e.Q6J("ngIf",null==(s=n.userForm.get("apellidos"))?null:s.touched),e.xp6(7),e.Q6J("ngIf",null==(u=n.userForm.get("email"))?null:u.touched),e.xp6(7),e.Q6J("ngClass",e.WLB(15,z,!0===(null==(m=n.userForm.get("estatus"))?null:m.value),!1===(null==(m=n.userForm.get("estatus"))?null:m.value))),e.xp6(1),e.hij(" ",null!=(v=n.userForm.get("estatus"))&&v.value?"Activo":"Inactivo"," "),e.xp6(7),e.Q6J("ngIf",null==(f=n.userForm.get("requiereContrasena"))?null:f.value),e.xp6(2),e.Q6J("disabled",!n.userForm.valid),e.xp6(1),e.hij(" ",n.isModalAdd?"Agregar":"Actualizar"," ")}},dependencies:[l.mk,l.sg,l.O5,l.RF,l.n9,x.S,a._Y,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,g.LS,g._s],styles:[".pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;margin-bottom:5px}.pagination-and-items-per-page[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:10px;background-color:#f0f0f0;border-radius:5px;box-shadow:0 2px 4px #0000001a}.items-per-page[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;padding:5px;border:1px solid #ccc;border-radius:3px}textarea[_ngcontent-%COMP%]{resize:none}.input-group[_ngcontent-%COMP%]{position:relative;border-radius:10px}.input-group[_ngcontent-%COMP%]   .ti-search[_ngcontent-%COMP%]{color:#000;position:absolute;right:10px;top:10%;transform:translate(-150%)}.error-message[_ngcontent-%COMP%]{color:red}.modal-dialog[_ngcontent-%COMP%]{max-width:90%}h3[_ngcontent-%COMP%]{text-align:center}h4[_ngcontent-%COMP%]{text-align:right;color:red}h2[_ngcontent-%COMP%]{text-align:center}.form-label-custom[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;margin-left:10px}input[type=checkbox][_ngcontent-%COMP%]:checked{color:green}"]}),t})(),canActivate:[d(2087).a],data:{claimType:"CanAccessCandidato"}}];let H=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild($),_.Bz]}),t})();var K=d(6208),W=d(9317);let V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,H,K.m,a.UX,a.u5,W.A0,g.JX]}),t})()}}]);