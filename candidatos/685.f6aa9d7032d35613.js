"use strict";(self.webpackChunkcandidatos=self.webpackChunkcandidatos||[]).push([[685],{9685:(U,d,c)=>{c.r(d),c.d(d,{DeclaracionModule:()=>_});var u=c(5476),h=c(2087),r=c(760),e=c(4769),m=c(553),g=c(9862);let v=(()=>{class a{constructor(i){this.http=i,this.apiUrl=m.N.apiUrl}getDeclaracionId(i){const o=this.apiUrl+"/api/Declariaciones/obtener_declaracion_id?id="+i.toString();return this.http.get(o)}putDeclaracionId(i,o){const t=this.apiUrl+"/api/Declariaciones/editar_declaracion?id="+i.toString();return this.http.put(t,o)}}return a.\u0275fac=function(i){return new(i||a)(e.LFG(g.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var f=c(8245),l=c(6814),D=c(6207);function x(a,n){1&a&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA())}function b(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"label",13)(1,"p"),e._uU(2," Agrega tu archivo PDF con tus delcaraciones "),e.qZA(),e._UZ(3,"img",14),e.TgZ(4,"input",15),e.NdJ("change",function(t){e.CHM(i);const s=e.oxw(2);return e.KtG(s.seleccionarArchivo(t))}),e.qZA()()}}function A(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"div",16),e._UZ(1,"img",17),e.TgZ(2,"label",8),e._uU(3),e.qZA(),e.TgZ(4,"a",18),e._uU(5,"Ver declaracion"),e.qZA(),e.TgZ(6,"button",19),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.eliminarArchivo())}),e._uU(7,"Eliminar Archivo"),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(3),e.Oqu(i.nombreArchivo),e.xp6(1),e.Q6J("href",i.declaracion.rutaDeclaracion.foto,e.LSH)}}function Z(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",8),e._uU(3,"Archivo PDF de tus declaraciones "),e.qZA(),e.TgZ(4,"div",9),e.YNc(5,b,5,0,"label",10),e.qZA(),e.YNc(6,A,8,2,"div",11),e.TgZ(7,"button",12),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.putDeclaracion())}),e._uU(8,"Terminar Actualizaci\xf3n"),e.qZA()()()}if(2&a){const i=e.oxw();e.xp6(5),e.Q6J("ngIf",i.declaracion&&""==i.declaracion.rutaDeclaracion.foto),e.xp6(1),e.Q6J("ngIf",i.declaracion&&""!=i.declaracion.rutaDeclaracion.foto),e.xp6(1),e.Q6J("disabled",""==i.declaracion.rutaDeclaracion.foto)}}function C(a,n){1&a&&e._UZ(0,"app-no-results")}const y=[{path:"",component:(()=>{class a{constructor(i,o){this.servicioDeclaracion=i,this.servicioMensaje=o,this.idActual=localStorage.getItem("usuarioId"),this.isLoading=r.v.neutro,this.nombreArchivo="",this.declaracion={idDelcaracion:null,rutaDeclaracion:{foto:"",tipo:1}}}ngOnInit(){console.log("Inciamos el componente..."),this.getDeclaracion()}getDeclaracion(){this.isLoading=r.v.trueLoading,this.servicioDeclaracion.getDeclaracionId(this.idActual).subscribe({next:i=>{this.declaracion=i,this.isLoading=r.v.falseLoading},error:i=>{console.log("Error al traer la declaracion: ",i),this.isLoading=r.v.errorLoading}})}seleccionarArchivo(i){console.log("Obteniendo archivo a editar... ");const o=i.target.files[0];if(o){const t=new FileReader;t.readAsDataURL(o),t.onload=()=>{this.declaracion.rutaDeclaracion.foto=t.result,this.declaracion.rutaDeclaracion.tipo=2,this.nombreArchivo=o.name,console.log("El archivo en base 64: "+this.declaracion.foto)}}}eliminarArchivo(){this.servicioMensaje.mensajeAdvertencia("\xbfEstas seguro de eliminar la declaraci\xf3n?",()=>{this.declaracion.rutaDeclaracion.foto="",this.declaracion.rutaDeclaracion.tipo=1,this.nombreArchivo="",this.servicioDeclaracion.putDeclaracionId(this.idActual,this.declaracion).subscribe({next:i=>{this.servicioMensaje.mensajeExito("Se elimin\xf3 con \xe9xito")},error:i=>{this.servicioMensaje.mensajeError("Error al eliminar")}})})}putDeclaracion(){this.servicioDeclaracion.putDeclaracionId(this.idActual,this.declaracion).subscribe({next:i=>{console.log(i),this.declaracion.rutaDeclaracion.foto=i.rutaDeclaracion.foto,this.declaracion.tipo=1,this.servicioMensaje.mensajeExito("Se actualiz\xf3 con \xe9xito")},error:i=>{this.servicioMensaje.mensajeError("Error al actualizar")}})}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(v),e.Y36(f.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-declaracion"]],decls:10,vars:4,consts:[[1,"row"],[1,"bienvenida"],[3,"ngSwitch"],["class","progress",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"progress"],[1,"progress-bar","progress-bar-indeterminate","bg-green"],[1,"col-md-12"],["for","",1,"form-label"],[1,"form-group",2,"width","100%","display","flex","justify-content","center","align-items","center"],["style","width: 100%; height: 100%; padding: 1rem; display: flex; flex-direction:column; align-items: center; border: 4px dashed rgb(104, 104, 104); border-radius: 5px;","for","declaracion",4,"ngIf"],["class","mt-1","style","width: 100%;  display:flex; justify-content: center; align-items: center; flex-direction: column; padding: 1rem 0 0 0;",4,"ngIf"],[1,"btn","btn-primary","mt-3",2,"width","100%",3,"disabled","click"],["for","declaracion",2,"width","100%","height","100%","padding","1rem","display","flex","flex-direction","column","align-items","center","border","4px dashed rgb(104, 104, 104)","border-radius","5px"],["src","assets/images/pdf-des.png","alt","Subir archivo",2,"width","155px"],["type","file","accept","application/pdf","id","declaracion",1,"form-control",2,"display","none",3,"change"],[1,"mt-1",2,"width","100%","display","flex","justify-content","center","align-items","center","flex-direction","column","padding","1rem 0 0 0"],["src","assets/images/pdf.png","alt","",2,"width","155px","margin-bottom","1rem"],["target","_blank",3,"href"],[1,"btn","btn-danger","mt-2",2,"width","100%",3,"click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Bienvenida/o al cuestionario de la declaraci\xf3n para el candidato"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Lee con atencion cada uno de los campos y verificalos antes de enviar"),e.qZA()()(),e.ynx(6,2),e.YNc(7,x,2,0,"div",3),e.YNc(8,Z,9,3,"div",4),e.YNc(9,C,1,0,"app-no-results",4),e.BQk()),2&i&&(e.xp6(6),e.Q6J("ngSwitch",o.isLoading),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4))},dependencies:[l.O5,l.RF,l.n9,D.S]}),a})(),canActivate:[h.a],data:{claimType:"CanAccessDeclaracion"}}];let S=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(y),u.Bz]}),a})();var T=c(6208),p=c(95);let _=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[l.ez,S,T.m,p.UX,p.u5]}),a})()}}]);