"use strict";(self.webpackChunkcandidatos=self.webpackChunkcandidatos||[]).push([[932],{7932:(k,y,c)=>{c.r(y),c.d(y,{TrayectoriaModule:()=>A});var d=c(6814),u=c(6208),s=c(95),m=c(5476),h=c(2087),l=c(760),t=c(4769),T=c(553),g=c(9862);let v=(()=>{class a{constructor(r){this.http=r,this.apiUrl=T.N.apiUrl}getTrayectoriasId(r){const e=this.apiUrl+"/api/Trayectoria/obtener_trayectorias_id?id="+r.toString();return this.http.get(e)}getTrayectoriaId(r){const e=this.apiUrl+"/api/Trayectoria/obtener_trayectoria_id?id="+r.toString();return this.http.get(e)}postTrayectoria(r){return this.http.post(this.apiUrl+"/api/Trayectoria/agregar_trayectoria",r)}putTrayectoriaId(r,e){const o=this.apiUrl+"/api/Trayectoria/editar_trayectoria?id="+r.toString();return this.http.put(o,e)}deleteTrayectoriaId(r){const e=this.apiUrl+"/api/Trayectoria/eliminar_trayectoria?id="+r.toString();return this.http.delete(e)}}return a.\u0275fac=function(r){return new(r||a)(t.LFG(g.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var b=c(6207);function _(a,i){1&a&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.qZA())}function C(a,i){if(1&a){const r=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"h5",24),t._uU(3),t.qZA(),t.TgZ(4,"p",25),t._uU(5),t.qZA(),t.TgZ(6,"button",26),t.NdJ("click",function(){const n=t.CHM(r).$implicit,p=t.oxw(2);return t.KtG(p.deleteTrayectoria(n.idTrayectoriaCompleta))}),t._uU(7,"Eliminar"),t.qZA(),t.TgZ(8,"button",27),t.NdJ("click",function(){const n=t.CHM(r).$implicit,p=t.oxw(2);return t.KtG(p.setFormularioTrayectoria(n))}),t._uU(9,"Editar"),t.qZA()()()}if(2&a){const r=i.$implicit;t.xp6(3),t.Oqu(r.hechoImportante),t.xp6(2),t.Oqu(r.descripcion)}}function f(a,i){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"div",7)(2,"button",8),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.openModalTrayectoria("staticBackdrop"))}),t._uU(3," Aregar nueva trayectoria "),t.qZA()(),t.TgZ(4,"div",9)(5,"div",10)(6,"div",11)(7,"div",12)(8,"h1",13),t._uU(9,"Trayectoria"),t.qZA(),t.TgZ(10,"button",14),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.cerrarModal("staticBackdrop"))}),t.qZA()(),t.TgZ(11,"div",15)(12,"input",16),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.trayectoria.hechoImportante=o)}),t.qZA(),t.TgZ(13,"textarea",17),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.trayectoria.descripcion=o)}),t.qZA()(),t.TgZ(14,"div",18)(15,"button",19),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.botonEditarTrayectoria?o.editTrayectoria():o.postTrayectoria())}),t._uU(16),t.qZA()()()()(),t.TgZ(17,"div",20),t.YNc(18,C,10,2,"div",21),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(12),t.Q6J("ngModel",r.trayectoria.hechoImportante),t.xp6(1),t.Q6J("ngModel",r.trayectoria.descripcion),t.xp6(3),t.hij(" ",r.botonEditarTrayectoria?"Terminar de editar trayectoria":"Terminar de agregar trayectoria"," "),t.xp6(2),t.Q6J("ngForOf",r.trayectorias)}}function x(a,i){1&a&&t._UZ(0,"app-no-results")}const M=[{path:"",component:(()=>{class a{constructor(r){this.servicioTrayectoria=r,this.idActual=localStorage.getItem("usuarioId"),this.isLoading=l.v.neutro,this.botonEditarTrayectoria=!1,this.trayectoria={idTrayectoriasCompleta:0,idTrayectoriaPolitica:this.idActual,hechoImportante:"",descripcion:""},this.hechoImportante="",this.descripcion="",this.trayectorias=[]}ngOnInit(){console.log("Inicializamos el componente..."),this.getTrayectorias()}getTrayectorias(){this.isLoading=l.v.trueLoading,this.servicioTrayectoria.getTrayectoriasId(this.idActual).subscribe({next:r=>{this.trayectorias=r,this.isLoading=l.v.falseLoading},error:r=>{this.isLoading=l.v.errorLoading}})}abrirModal(r){const e=document.getElementById(r);if(e){e.classList.add("show"),e.style.display="block",document.body.classList.add("modal-open");const o=document.createElement("div");o.classList.add("modal-backdrop","show"),document.body.appendChild(o)}}cerrarModal(r){const e=document.getElementById(r);if(e){e.classList.remove("show"),e.style.display="none",document.body.classList.remove("modal-open");const o=document.getElementsByClassName("modal-backdrop")[0];o&&document.body.removeChild(o)}}resetFormTrayectoria(){this.hechoImportante="",this.descripcion=""}openModalTrayectoria(r){this.botonEditarTrayectoria=!1,this.resetFormTrayectoria(),this.abrirModal(r)}postTrayectoria(){this.servicioTrayectoria.postTrayectoria(this.trayectoria).subscribe({next:r=>{this.trayectorias.push(r),alert("Se agrego bien la trayectoria"),this.cerrarModal("staticBackdrop")},error:r=>{console.log("Error al enviar trayectoria ",r)}})}setFormularioTrayectoria(r){this.botonEditarTrayectoria=!0,this.abrirModal("staticBackdrop"),this.trayectoria=r,this.hechoImportante=r.hechoImportante,this.descripcion=r.descripcion}editTrayectoria(){this.servicioTrayectoria.putTrayectoriaId(this.trayectoria.idTrayectoriaCompleta,this.trayectoria).subscribe({next:r=>{this.trayectoria.hechoImportante=r.hechoImportante,this.trayectoria.descripcion=r.descripcion,alert("Se edito bien la trayectoria "),this.cerrarModal("staticBackdrop")},error:r=>{alert("Error al actualizar la trayectoria: "+r)}})}deleteTrayectoria(r){this.servicioTrayectoria.deleteTrayectoriaId(r).subscribe({next:e=>{const o=this.trayectorias.filter(n=>n.idTrayectoriaCompleta!=r);this.trayectorias=o,alert("Se elimino correctamente")},error:e=>{console.log("Error al eliminar trayectoria: ",e)}})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-trayectoria"]],decls:10,vars:4,consts:[[1,"row"],[1,"bienvenida"],[3,"ngSwitch"],["class","progress",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"progress"],[1,"progress-bar","progress-bar-indeterminate","bg-green"],[1,"col-md-12"],[1,"btn","btn-primary",2,"background-color","rgb(119, 0, 255)","width","100%",3,"click"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-3"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["name","hechoImportante","type","text","accept","image/jpeg, image/png, image/gif","placeholder","T\xedtulo de tu trayectoria...",1,"form-control",3,"ngModel","ngModelChange"],["name","descripcion","id","","rows","5","placeholder","Describe detalladamente tu trayectoria....",1,"form-control","mt-3",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",2,"width","100%",3,"click"],[1,"col-md-12","mt-3"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-danger",2,"margin-right",".5rem",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Bienvenida/o al cuestionario de trayectoria del candidato"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Lee con atencion cada uno de los campos y verificalos antes de enviar"),t.qZA()()(),t.ynx(6,2),t.YNc(7,_,2,0,"div",3),t.YNc(8,f,19,4,"div",4),t.YNc(9,x,1,0,"app-no-results",4),t.BQk()),2&r&&(t.xp6(6),t.Q6J("ngSwitch",e.isLoading),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4))},dependencies:[d.sg,d.RF,d.n9,b.S,s.Fj,s.JJ,s.On]}),a})(),canActivate:[h.a],data:{claimType:"CanAccessTrayectoria"}}];let Z=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.Bz.forChild(M),m.Bz]}),a})(),A=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.ez,Z,u.m,s.UX,s.u5]}),a})()}}]);