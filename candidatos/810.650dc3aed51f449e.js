"use strict";(self.webpackChunkcandidatos=self.webpackChunkcandidatos||[]).push([[810],{5810:(Q,m,i)=>{i.r(m),i.d(m,{CargoModule:()=>w});var u=i(6814),x=i(6208),v=i(5476),l=i(95),g=i(760),e=i(4769),C=i(9862),f=i(553),b=i(8645),d=i(6306),c=i(9397),D=i(772);let U=(()=>{class t{constructor(r,o){this.http=r,this.handleErrorService=o,this.route=`${f.N.apiUrl}/cargo`,this._refreshLisUsers$=new b.x,this.apiUrl=f.N.apiUrl,this._refreshListPuestoD$=new b.x}get refreshLisUsers(){return this._refreshLisUsers$}get refreshListPuestoD(){return this._refreshListPuestoD$}getCargos(){return this.http.get(`${this.route}/obtener_cargos`).pipe((0,d.K)(this.handleErrorService.handleError))}postCargo(r){return this.http.post(`${this.route}/agregar_cargo`,r).pipe((0,c.b)(()=>{this._refreshLisUsers$.next(null)}),(0,d.K)(this.handleErrorService.handleError))}deleteCrago(r){return this.http.delete(`${this.route}/eliminar_cargo?id=${r}`).pipe((0,c.b)(()=>{}),(0,d.K)(this.handleErrorService.handleError))}putCargo(r){return this.http.put(`${this.route}/editar_cargo`,r).pipe((0,c.b)(()=>{this._refreshLisUsers$.next(null)}),(0,d.K)(this.handleErrorService.handleError))}getCargosD(){return this.http.get(this.apiUrl+"/api/puesto/obtener_puestos").pipe((0,d.K)(this.handleErrorService.handleError))}getCargoId(r){const o=this.apiUrl+"/api/puesto/obtener_puesto_id?idPuesto="+r.toString();return this.http.get(o)}postCargoD(r){const o=new C.WM({"Content-Type":"application/json"});return this.http.post(this.apiUrl+"/api/puesto/enviar_puesto",r,{headers:o}).pipe((0,c.b)(()=>{this._refreshListPuestoD$.next(null)}),(0,d.K)(this.handleErrorService.handleError))}deleteCargoD(r){const o=this.apiUrl+"/api/puesto/eliminar_puesto?idPuesto="+r.toString();return this.http.delete(o).pipe((0,c.b)(()=>{this._refreshListPuestoD$.next(null)}),(0,d.K)(this.handleErrorService.handleError))}putCargoD(r,o){const s=this.apiUrl+"/api/puesto?idPuesto="+r.toString();return this.http.put(s,o).pipe((0,c.b)(()=>{this._refreshListPuestoD$.next(null)}),(0,d.K)(this.handleErrorService.handleError))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(C.eN),e.LFG(D.t))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=i(8245),S=i(8672),A=i(6207),h=i(6472);const P=["closebutton"];function Z(t,a){1&t&&(e.TgZ(0,"div",35),e._UZ(1,"div",36),e.qZA())}function E(t,a){if(1&t){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",49)(5,"button",50),e.NdJ("click",function(){const n=e.CHM(r).$implicit,p=e.oxw(2);return e.KtG(p.setDataModalUpdateD(n))}),e._UZ(6,"i",51),e.qZA(),e.TgZ(7,"button",52),e.NdJ("click",function(){const n=e.CHM(r).$implicit,p=e.oxw(2);return e.KtG(p.borrarUsuarioD(n.idPuesto,n.puesto1))}),e._UZ(8,"i",53),e.qZA()()()()}if(2&t){const r=a.$implicit;e.xp6(2),e.Oqu(r.puesto1)}}function L(t,a){if(1&t&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&t){const r=a.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}const F=function(t,a){return{itemsPerPage:t,currentPage:a}};function M(t,a){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"div",37)(2,"table",38)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Nombre del cargo"),e.qZA(),e.TgZ(7,"th",39),e._uU(8,"Acciones"),e.qZA()()(),e.TgZ(9,"tbody",40),e.YNc(10,E,9,1,"tr",41),e.ALo(11,"paginate"),e.qZA()()(),e.TgZ(12,"div",42)(13,"div",43)(14,"label",44),e._uU(15,"Elementos por p\xe1gina:"),e.qZA(),e.TgZ(16,"select",45),e.NdJ("ngModelChange",function(s){e.CHM(r);const n=e.oxw();return e.KtG(n.itemsPerPage=s)}),e.YNc(17,L,2,2,"option",46),e.qZA()(),e.TgZ(18,"div",47)(19,"pagination-controls",48),e.NdJ("pageChange",function(s){e.CHM(r);const n=e.oxw();return e.KtG(n.currentPage=s)}),e.qZA()()()()}if(2&t){const r=e.oxw();e.xp6(10),e.Q6J("ngForOf",e.xi3(11,3,r.cargosD,e.WLB(6,F,r.itemsPerPage,r.currentPage))),e.xp6(6),e.Q6J("ngModel",r.itemsPerPage),e.xp6(1),e.Q6J("ngForOf",r.itemsPerPageOptions)}}function j(t,a){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-no-results"),e.qZA())}function T(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," El nombre es obligatorio "),e.qZA())}function y(t,a){if(1&t&&(e.TgZ(0,"div",55),e.YNc(1,T,2,0,"div",56),e.qZA()),2&t){const r=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=r.userFormD.get("puesto1"))?null:o.hasError("required"))}}const N=[{path:"",component:(()=>{class t{constructor(r,o,s,n){this.cargoService=r,this.mensajeService=o,this.spinnerService=s,this.formBuilder=n,this.cargos=[],this.isLoadingUsers=g.v.neutro,this.usuariosFilter=[],this.isModalAdd=!1,this.filtro="",this.itemsPerPage=3,this.currentPage=1,this.mostrarCampoPartidos=!1,this.itemsPerPageOptions=[3,6,9],this.cargosD=[],this.isLoadingUsersD=g.v.neutro,this.usuariosFilterD=[],this.isModalAddD=!1,this.filtroD="",this.itemsPerPageD=3,this.currentPageD=1,this.mostrarCampoPartidosD=!1,this.itemsPerPageOptionsD=[3,6,9],this.idSeleccionado=0,this.crearFormularioUsuario(),this.crearFormularioUsuarioD()}ngOnInit(){this.cargoService.refreshLisUsers.subscribe(()=>this.getListadoUsuarios()),this.getListadoUsuarios(),this.cargoService.refreshListPuestoD.subscribe(()=>this.getListaCargos()),this.getListaCargos()}crearFormularioUsuario(){this.userForm=this.formBuilder.group({cargoId:[null],nombreCargo:["",l.kI.required]})}crearFormularioUsuarioD(){this.userFormD=this.formBuilder.group({idPuesto:[null],puesto1:["",l.kI.required]})}getListadoUsuarios(){this.isLoadingUsers=g.v.trueLoading,this.cargoService.getCargos().subscribe({next:r=>{this.cargos=r,this.usuariosFilter=this.cargos,this.isLoadingUsers=g.v.falseLoading},error:()=>{this.isLoadingUsers=g.v.errorLoading}})}getListaCargos(){this.isLoadingUsersD=g.v.trueLoading,this.cargoService.getCargosD().subscribe({next:r=>{this.cargosD=r,this.usuariosFilterD=this.cargosD,this.isLoadingUsersD=g.v.falseLoading,console.log("Los datos de los Cargos --- > ",this.cargosD),console.log("Los datos del estatus --\x3e ",this.isLoadingUsersD)},error:()=>{this.isLoadingUsersD=g.v.errorLoading}})}resetForm(){this.closebutton.nativeElement.click(),this.userForm.reset()}resetFormD(){this.closebutton.nativeElement.click(),this.userFormD.reset()}agregarUsuario(){const r=this.userForm.get("cargoId"),o=r?r.value:void 0;let s;null!=o?s={...this.cargo,cargoId:o}:(s={...this.cargo},delete s.cargoId),this.cargoService.postCargo(s).subscribe({next:()=>{this.mensajeService.mensajeExito("Cargo agregado con \xe9xito"),this.resetForm()},error:n=>{this.mensajeService.mensajeError("Error al agregar cargo"),console.error(n)}})}agregarUsuarioD(){const r=this.userFormD.get("idPuesto"),o=r?r.value:void 0;let s;null!=o?s={...this.cargoD,idPuesto:o}:(s={...this.cargoD},delete s.idPuesto),this.cargoService.postCargoD(s).subscribe({next:()=>{this.mensajeService.mensajeExito("Cargo agregado con \xe9xito"),this.resetFormD()},error:n=>{this.mensajeService.mensajeError("Error al agregar cargo"),console.error(n)}}),console.log("Este es el dato del puesto que se va a enviar -> ",s)}actualizarUsuario(){this.cargoService.putCargo(this.cargo).subscribe({next:()=>{this.mensajeService.mensajeExito("Usuario actualizado con \xe9xito"),this.resetForm()},error:r=>{this.mensajeService.mensajeError("Error al actualizar usuario"),console.error(r)}})}actualizarUsuarioD(){this.cargoService.putCargoD(this.cargoD.idPuesto,this.cargoD).subscribe({next:()=>{this.mensajeService.mensajeExito("Usuario actualizado con \xe9xito"),this.resetFormD()},error:r=>{this.mensajeService.mensajeError("Error al actualizar usuario"),console.error(r)}})}submitUsuario(){this.cargo=this.userForm.value,this.isModalAdd?this.agregarUsuario():this.actualizarUsuario()}submitUsuarioD(){this.cargoD=this.userFormD.value,this.isModalAddD?this.agregarUsuarioD():this.actualizarUsuarioD()}borrarUsuario(r,o){this.mensajeService.mensajeAdvertencia(`\xbfEst\xe1s seguro de eliminar el usuario: ${o}?`,()=>{this.cargoService.deleteCrago(r).subscribe({next:()=>{this.mensajeService.mensajeExito("Usuario borrado correctamente")},error:s=>{this.mensajeService.mensajeError("string"==typeof s?s:"Error al borrar usuario"),console.error("Error al borrar usuario:",s)}})})}borrarUsuarioD(r,o){this.mensajeService.mensajeAdvertencia(`\xbfEst\xe1s seguro de eliminar al cargo de: ${o}?`,()=>{this.cargoService.deleteCargoD(r).subscribe({next:()=>{this.mensajeService.mensajeExito("Cargo borrado correctamente")},error:s=>{this.mensajeService.mensajeError("string"==typeof s?s:"Error al borrar cargo"),console.error("Error al borrar cargo:",s)}})})}handleChangeAdd(){this.userForm.reset(),this.isModalAdd=!0}handleChangeAddD(){this.userFormD.reset(),this.isModalAddD=!0}setDataModalUpdate(r){this.isModalAdd=!1,this.userForm.patchValue({cargoId:r.idPuesto,nombreCargo:r.puesto1}),console.log(this.userForm.value)}setDataModalUpdateD(r){this.isModalAddD=!1,this.userFormD.patchValue({idPuesto:r.idPuesto,puesto1:r.puesto1}),console.log("Los datos que se le agregan, al formulario --- > ",this.userFormD.value)}filtrarResultados(){return this.cargos.filter(r=>r.puesto1.toLowerCase().includes(this.filtro.toLowerCase()))}filtrarResultadosD(){return this.cargosD.filter(r=>r.puesto1.toLowerCase().includes(this.filtroD.toLowerCase()))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(U),e.Y36(_.V),e.Y36(S.t2),e.Y36(l.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-cargos"]],viewQuery:function(r,o){if(1&r&&e.Gf(P,5),2&r){let s;e.iGM(s=e.CRH())&&(o.closebutton=s.first)}},decls:41,vars:10,consts:[[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","border-bottom","py-3"],[1,"d-flex"],["data-bs-toggle","modal","data-bs-target","#modal-report",1,"btn","btn-primary",3,"click"],[1,"ti","ti-plus","me-1"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Buscar",1,"form-control","form-control-rounded",3,"ngModel","ngModelChange"],["busquedaInput",""],[1,"input-icon-addon"],[1,"ti","ti-search"],[3,"ngSwitch"],["class","progress",4,"ngSwitchCase"],[4,"ngSwitchCase"],["id","modal-report","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","modal-blur","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["closebutton",""],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row"],[1,"col-lg-12"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","puesto1",1,"form-control"],["class","error-message",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"progress"],[1,"progress-bar","progress-bar-indeterminate","bg-green"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","text-nowrap","datatable"],[1,"text-center",2,"width","7%"],[1,"table-tbody"],[4,"ngFor","ngForOf"],[1,"pagination-and-items-per-page",2,"margin-bottom","0px"],[1,"items-per-page"],["for","itemsPerPage"],["id","itemsPerPage",2,"margin-left","5px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-container"],[3,"pageChange"],[1,"d-flex","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#modal-report",1,"btn","btn-warning","btn-icon","btn-sm",3,"click"],[1,"ti","ti-edit"],[1,"btn","btn-danger","btn-icon","btn-sm",3,"click"],[1,"ti","ti-eraser"],[3,"value"],[1,"error-message"],[4,"ngIf"]],template:function(r,o){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Cargos"),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e.NdJ("click",function(){return o.handleChangeAddD()}),e._UZ(9,"i",8),e._uU(10,"Agregar Cargo "),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"input",11,12),e.NdJ("ngModelChange",function(n){return o.filtroD=n}),e.qZA(),e.TgZ(15,"span",13),e._UZ(16,"i",14),e.qZA()()()()(),e.ynx(17,15),e.YNc(18,Z,2,0,"div",16),e.YNc(19,M,20,9,"div",17),e.YNc(20,j,2,0,"div",17),e.BQk(),e.qZA()(),e.TgZ(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"h5",22),e._uU(26),e.qZA(),e._UZ(27,"button",23,24),e.qZA(),e.TgZ(29,"form",25),e.NdJ("ngSubmit",function(){return o.submitUsuarioD()}),e.TgZ(30,"div",26)(31,"div",27)(32,"div",28)(33,"div",29)(34,"label",30),e._uU(35,"Nombre"),e.qZA(),e._UZ(36,"input",31),e.YNc(37,y,2,1,"div",32),e.qZA()()()(),e.TgZ(38,"div",33)(39,"button",34),e._uU(40),e.qZA()()()()()()()),2&r){let s;e.xp6(13),e.Q6J("ngModel",o.filtroD),e.xp6(4),e.Q6J("ngSwitch",o.isLoadingUsersD),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(6),e.hij(" ",o.isModalAddD?"Agregar":"Actualizar"," Cargo "),e.xp6(3),e.Q6J("formGroup",o.userFormD),e.xp6(8),e.Q6J("ngIf",null==(s=o.userFormD.get("puesto1"))?null:s.touched),e.xp6(2),e.Q6J("disabled",!o.userFormD.valid),e.xp6(1),e.hij(" ",o.isModalAddD?"Agregar":"Actualizar"," ")}},dependencies:[u.sg,u.O5,u.RF,u.n9,A.S,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,l.On,h.LS,h._s],styles:[".input-group[_ngcontent-%COMP%]{position:relative;border-radius:10px}.input-group[_ngcontent-%COMP%]   .ti-search[_ngcontent-%COMP%]{color:#000;position:absolute;right:10px;top:10%;transform:translate(-150%)}.error-message[_ngcontent-%COMP%]{color:red}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;margin-bottom:5px}.pagination-and-items-per-page[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:10px;background-color:#f0f0f0;border-radius:5px;box-shadow:0 2px 4px #0000001a}.items-per-page[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;padding:5px;border:1px solid #ccc;border-radius:3px}"]}),t})(),canActivate:[i(2087).a],data:{claimType:"CanAccessCargos"}}];let O=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(N),v.Bz]}),t})();var I=i(9317);let w=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,x.m,O,l.UX,l.u5,I.A0,h.JX]}),t})()}}]);